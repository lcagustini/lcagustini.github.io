<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> -->
    <meta name="description" content="This is my portfolio!">
    <meta name="author" content="Lucas Cunha Agustini">

    <title>Lucas Cunha Agustini - Portfolio</title>

    <link href="../vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Workbench&display=swap" rel="stylesheet">

    <link href="../css/fonts.css" rel="stylesheet">
    <link href="../css/default.css" rel="stylesheet">
</head>

<body class="center roboto-regular">
    <br>

    <div class="text-center">
        <a class="link horizontal-spacing" href="../index.html">Home</a>
        <a class="link horizontal-spacing" href="">Projects</a>
        <a class="link horizontal-spacing" href="../career.html">Career</a>
        <a class="link horizontal-spacing" href="../skills.html">Skills</a>
    </div>

    <br>
    <hr>
    <br>

    <div class="text-center">
        <a class="link horizontal-spacing" href="games.html">Games</a>
        <a class="link horizontal-spacing" href="techdemos.html">Tech Demos</a>
        <a class="link horizontal-spacing" href="emulators.html">Emulators</a>
        <a class="link horizontal-spacing" href="tools.html">Tools</a>
        <a class="link horizontal-spacing" href="mods.html">Mods</a>
    </div>

    <br>
    <hr>

    <div class="title-container">
        <h1 class="title workbench-regular text-center">Per object pixelation</h1>
        <p class="subtitle center">Professional work</p>
    </div>
    
    <img class="screenshot" src="../img/pixelate/result-gif.gif" alt="">
    <p>
        A stencil based post-processing effect that gives specific objects in a scene a pixelated look, without needing special materials or rendering the whole game at a lower resolution.
    </p>
    <p>
        As an example of how this was done, we have this source scene, which is rendered normally up until the post-processing step
    </p>
    <p>
        Every object that will be pixelated writes to the stencil buffer during the render process, which means at the end of the rendering pipeline, we get a mask of these objects in the frame, including depth testing and culling
    </p>

    <div class="screenshot-container">
        <img class="screenshot-side-by-side" src="../img/pixelate/source.png" alt="">
        <img class="screenshot-side-by-side" src="../img/pixelate/stencil.png" alt="">
    </div>

    <p>
        This mask is then downscaled together with the color buffer, which will pixelate all objects, and give us a source buffer for the effect we indend to apply
    </p>
    
    <div class="screenshot-container">
        <img class="screenshot-side-by-side" src="../img/pixelate/color-pixel.png" alt="">
        <img class="screenshot-side-by-side" src="../img/pixelate/stencil-pixel.png" alt="">
    </div>
    
    <p>
        The final step of this effect will be to overlay the pixelated color buffer on top of the original buffer using the stencil mask.
    </p>
    <p>
        However, if we do this with the original stencil mask, we will cut out the pixels around the silhouette of the object, resulting in a pixelated ball with round edges.
    </p>
    <p>
        Moreover, if we use the pixelated stencil mask, we will get the pixelated ball in full, but we will leave parts of the full resolution ball in the final render, making the overlay very obvious
    </p>
    <p>
        This means that we need a mask that cuts out the pixelated ball, but also gets a bit of pixelated background that can hide the ball from the original color buffer, completely replacing it.
    </p>

    <div class="screenshot-container">
        <img class="screenshot-extra-small" src="../img/pixelate/silhouette-1.png" alt="">
        <img class="screenshot-extra-small" src="../img/pixelate/silhouette-2.png" alt="">
        <img class="screenshot-extra-small" src="../img/pixelate/silhouette-3.png" alt="">
    </div>

    <p>
        In order to do this, the original stencil mask is added to the pixel mask, creating a new mask with a round shape plus some pixels sticking out.
    </p>
    <img class="screenshot" src="../img/pixelate/mask.png" alt="">
    
    <p>
        Now, with this mask done and the pixelated color buffer, we can apply this mask to it and overlay the result on top of the camera buffer and resume the rendering as normal, applying post-process and tone map as usual, giving us the final frame
    </p>
    <img class="screenshot" src="../img/pixelate/result-final.png" alt="">

    <div class="title-container">
        <h1 class="title workbench-regular text-center">Depth of Field</h1>
        <p class="subtitle center">Professional work</p>
    </div>
    
    <img class="screenshot" src="../img/dof/result-gif.gif" alt="">
    <p>
        A post-processing effect that blurs the image based on a focal plane and distances from this plane, known as a circle of confusion, which simulates the effect of a camera with a wide aperture
    </p>
    <p>
        To show how this effect works, we start with this source render with it corresponding depth buffer
    </p>
    
    <div class="screenshot-container">
        <img class="screenshot-side-by-side" src="../img/dof/source.png" alt="">
        <img class="screenshot-side-by-side" src="../img/dof/depth.png" alt="">
    </div>
    <p>
        From this depth buffer, we can take our desired focal plane and get which fragments should be considered background, which should be foreground, and which are in focus
    </p>
    <p>
        With this we can build a buffer where then red and green channels store this information
    </p>
    <img class="screenshot" src="../img/dof/circle-of-confusion.png" alt="">
    <p>
        We want to separate the background from the rest of the image and blur them separately, this is so the foreground can bleed into the background when blurred, but not the other way around
    </p>
    <p>
        To do this, we create a mask by generating a mask from the background channel of the circle of confusion and storing it as the blue channel, creating a buffer with all the supporting data that we need to render the effect
    </p>

    <div class="screenshot-container">
        <img class="screenshot-side-by-side" src="../img/dof/mask.png" alt="">
        <img class="screenshot-side-by-side" src="../img/dof/coc-mask.png" alt="">
    </div>

    <p>
        With this buffer done, we can apply the mask to the camera source to get a background only buffer
    </p>
    <img class="screenshot" src="../img/dof/bg.png" alt="">
    <p>
        Then we can blur both buffer we have separately
    </p>

    <div class="screenshot-container">
        <img class="screenshot-side-by-side" src="../img/dof/bg-blur.png" alt="">
        <img class="screenshot-side-by-side" src="../img/dof/blur.png" alt="">
    </div>

    <p>
        Finally, we can take the circle of confusion red and green channels to interpolate between the three buffers we have, the blurred background, blurred whole image, and the original camera source
    </p>
    <p>
        With the effect done, the rendering can continue normally and we get a final result that mimics a camera shallow depth of field
    </p>
    <img class="screenshot" src="../img/dof/result-final.png" alt="">

    <div class="title-container">
        <h1 class="title workbench-regular text-center">Simple Parallax</h1>
        <p class="subtitle center">Personal work</p>
    </div>

    <div class="screenshot-container">
        <img class="screenshot-extra-small" src="../img/parallax/simple.gif" alt="">
        <div class="screenshot-text">
            <p>
                A parallax effect is achieved by insetting the uvs of a quad by the view direction in tangent space
                <br>
                <br>
                This makes the shader sample the texture as if the quad was push back, giving the artist the power to make materials that look like it has multiples transparent planes on top of each other, but is actually a simple opaque quad
            </p>
        </div>
    </div>

    <div class="title-container">
        <h1 class="title workbench-regular text-center">Interior Mapping Parallax</h1>
        <p class="subtitle center">Personal work</p>
    </div>

    <div class="screenshot-container">
        <img class="screenshot-extra-small" src="../img/parallax/interior.gif" alt="">
        <div class="screenshot-text">
            <p>
                An extension of this parallax effect is done by projecting the quad uvs into a virtual cube along the view direction, then using this projection as uvs for a cubemap
            </p>
        </div>
    </div>

    <div class="screenshot-container">
        <div class="screenshot-text">
            <p>
                This effect is used to simulate interiors and holes without the need for geometry, which greatly increases the amount of rooms that can be rendered
            </p>
        </div>
        <img class="screenshot-extra-small" src="../img/parallax/hatch.gif" alt="">
    </div>

    <br>
    <br>
    <br>
</body>

</html>
