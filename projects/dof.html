<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> -->
    <meta name="description" content="This is my portfolio!">
    <meta name="author" content="Lucas Cunha Agustini">

    <title>Lucas Cunha Agustini - Portfolio</title>

    <link href="../vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Workbench&display=swap" rel="stylesheet">

    <link href="../css/default.css" rel="stylesheet">
</head>

<body class="center roboto-regular">
    <br>

    <div class="text-center">
        <a class="link horizontal-spacing" href="../index.html">Home</a>
        <a class="link horizontal-spacing" href="">Projects</a>
        <a class="link horizontal-spacing" href="../career.html">Career</a>
        <a class="link horizontal-spacing" href="../skills.html">Skills</a>
    </div>

    <br>
    <hr>
    <br>

    <div class="text-center">
        <a class="link horizontal-spacing" href="pixelate.html">Pixelate</a>
        <a class="link horizontal-spacing" href="dof.html">Depth of Field</a>
        <a class="link horizontal-spacing" href="parallax.html">Parallax</a>
    </div>

    <br>
    <hr>

    <h1 class="title workbench-regular text-center">Depth of Field</h1>
    
    <img class="screenshot" src="../img/dof/result-gif.gif" alt="">
    <p>
        A post-processing effect that blurs the image based on a focal plane and distances from this plane, known as a circle of confusion, which simulates the effect of a camera with a wide aperture
        <br>
        <br>
        To show how this effect works, we start with this source render
    </p>
    <img class="screenshot" src="../img/dof/source.png" alt="">
    <p>
        This scene produces the following depth buffer during render
    </p>
    <img class="screenshot" src="../img/dof/depth.png" alt="">
    <p>
        From this depth buffer, we can take our desired focal plane and get which fragments should be considered background, which should be foreground, and which are in focus
        <br>
        With this we can build a buffer where then red and green channels store this information
    </p>
    <img class="screenshot" src="../img/dof/circle-of-confusion.png" alt="">
    <p>
        We want to separate the background from the rest of the image and blur them separately, this is so the foreground can bleed into the background when blurred, but not the other way around
        <br>
        To do this, we create a mask by generating a mask from the background channel of the circle of confusion
    </p>
    <img class="screenshot" src="../img/dof/mask.png" alt="">
    <p>
        And storing it as the blue channel, creating a buffer with all the supporting data that we need to render the effect
    </p>
    <img class="screenshot" src="../img/dof/coc-mask.png" alt="">
    <p>
        With this buffer done, we can apply the mask to the camera source to get a background only buffer
    </p>
    <img class="screenshot" src="../img/dof/bg.png" alt="">
    <p>
        That we can then blur separately
    </p>
    <img class="screenshot" src="../img/dof/bg-blur.png" alt="">
    <p>
        Now we can blur everything. This will be the source for the foreground blur later
    </p>
    <img class="screenshot" src="../img/dof/blur.png" alt="">
    <p>
        Finally, we can take the circle of confusion red and green channels to interpolate between the three buffers we have, the blurred background, blurred whole image, and the original camera source
    </p>
    <img class="screenshot" src="../img/dof/result.png" alt="">
    <p>
        With the effect done, the rendering can continue normally and we get a final result that mimics a camera shallow depth of field
    </p>
    <img class="screenshot" src="../img/dof/result-final.png" alt="">

    <br>
    <br>
    <br>
</body>

</html>
